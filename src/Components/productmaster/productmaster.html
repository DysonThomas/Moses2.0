@if (isModalOpen){

<app-addproduct-modal [churchId]="church_ID" [activeProducts]="products" (close)="handleClose()"></app-addproduct-modal>
}
<div class="container">

    <div class="header is-flex is-justify-content-space-between is-align-items-center mb-5">
        <h1 class="title is-4" aria-label="Product Master">Product Master</h1>
        <button (click)="openModal()" class="button is-primary" aria-label="Add Product">
            Add Product
        </button>
    </div>
    @if(products.length==0){
    <p class="no-products">No products available.</p>
    }
    @if(products.length>0){
    @for (product of products; track $index) {
    <div class="card" role="region" aria-label="Product card">
        <div class="info">
            <div class="details">
                <div class="name">{{product.product_name}}</div>

                <div class="price">{{product.price}}</div>
            </div>
        </div>
        <div class="actions">
            @if(product.id!=editingproductId){
            <button class="button  btn-manage" (click)="manageButton(product.id)" type="button"
                aria-label="Manage product">
                Manage</button>
            <button (click)="deleteProduct(product.id)" class="button is-danger">
                Delete
            </button>

            }
            @if(product.id==editingproductId){
            <div class="field has-addons is-flex-wrap-wrap">
                <div class="control is-expanded">
                    <input class="input" type="number" [(ngModel)]="newAmount" [min]="product.new_price"
                        placeholder="Enter New Amount" required />
                </div>
                <div class="control ml-3 mt-2-mobile ">
                    <button (click)="update(product.id)" class="button is-success">âœ“</button>
                </div>
                <div (click)="delete(product)" class="control ml-3 mt-2-mobile ">
                    <button class="button is-danger">X</button>
                </div>
            </div>
            }
        </div>
    </div>
    }
    }
</div>